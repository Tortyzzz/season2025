#include <cmath>
#include <vector>
#include <iostream>
using namespace std;

pair<vector<int>, int> decoderHammingCode(vector<int> received) {
    int n = received.size();
    int r = 0;
    
    while (pow(2, r) < n + 1) {
        r++;
    }

    int error_pos = 0;

    // Вычисляем синдром ошибки
    for (int i = 0; i < r; ++i) {
        int pos = pow(2, i);
        int parity = 0;

        for (int j = 1; j <= n; ++j) {
            if (j & pos) {
                parity ^= received[j - 1];
            }
        }

        if (parity != 0) {
            error_pos += pos;
        }
    }

    if (error_pos > 0 && error_pos <= n) {
        received[error_pos - 1] = 1 - received[error_pos - 1];
    }

    return make_pair(received, error_pos);
}

int main() {
    setlocale(LC_ALL, "rus");

    vector<int> receivedCode = { 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 1 };

    auto result = decoderHammingCode(receivedCode);

    vector<int> correctedCode = result.first;
    int errorBit = result.second;

    cout << "Исправленный код: ";
    for (int bit : correctedCode) cout << bit << " ";
    cout << endl;

    if (errorBit == 0) {
        cout << "Ошибок нет" << endl;
    }
    else {
        cout << "Error corrected at bit position: " << errorBit << endl;
    }
}
